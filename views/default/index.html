{{left_sidebar_enabled,right_sidebar_enabled=False,True}}
{{extend 'layout.html'}}

<h4>{{=T('What do we have here?')}}</h4>
{{=form.custom.begin}}
{{=form.custom.widget.query}}
{{=form.custom.end}}
{{ if form.vars.query:}}
{{=T('Searching for:')}} {{=form.vars.query}}
{{pass}}
{{ for i, sound in enumerate(sounds):}}
{{if i==items_per_page: break}}
<div class="sound">
  <div class="title"><a href="{{=URL('download_blob', args=sound.id)}}" title="{{=sound.title}}" type="{{=sound.mime_type}}"></a><a href="{{=URL('details', args=sound.id)}}">{{=sound.title}}</a></div>
  <div class="info">{{=T('Added')}} {{=prettydate(sound.created_on)}} {{=T('by')}} {{=sound.username}} {{=sound.play_count}} {{=T('views')}}</div>
  <div class="description">{{=sound.description}}</div>  
</div>
{{pass}}

{{if page:}}
<a href="{{=URL(args=[page-1])}}">{{=T('previous')}}</a>
{{pass}}

{{if len(sounds)>items_per_page:}}
<a href="{{=URL(args=[page+1])}}">{{=T('next')}}</a>
{{pass}}

{{block right_sidebar}}
{{=A(T("Upload a file"), _href=URL('create_sound'), _class='button', _style='margin-top: 1em;')}}
{{=A(T("Record"), _href=URL('record'), _class='button', _style='margin-top: 1em;')}}
<h4>{{=T("Explore")}}</h4>
<ul>
  <li>{{=A(T("My uploads"), _href=URL('my_uploads', user_signature=True))}}</li>  
</ul>
<div id="most_popular">
  {{=LOAD('default','most_popular',ajax=True)}}
</div>
{{end}}

<script type="text/javascript">        
  $("#no_table_query").one("focus", function() {
      $(this).val("");
  });  
</script>
