{{left_sidebar_enabled,right_sidebar_enabled=False,True}}
{{extend 'layout.html'}}

<h1>{{=T('Upload a file')}}</h1>
{{=form}}

<div class="progress">
    <div class="bar"></div >
    <div class="percent">0%</div >
</div>
    
<div id="status"></div>

<a href="{{=URL('index')}}">{{=T('Back')}}</a>

{{block right_sidebar}}
{{=A(T("Record"), _href=URL('record'), _class='button', _style='margin-top: 1em;')}}
{{end}}

<script type="text/javascript">
function uploadFiles(url, files) {
  var formData = new FormData();

  for (var i = 0, file; file = files[i]; ++i) {
    formData.append(file.name, file);
  }

  var xhr = new XMLHttpRequest();
  xhr.open('POST', url, true);
  xhr.onload = function(e) { console.log("uploading..."); };

  xhr.send(formData);  // multipart/form-data
}

$(function(){
	$('input[type="file"]').change(function(){
		uploadFiles('http://localhost:8080', $(this)[0].files);
	});	
});
</script>